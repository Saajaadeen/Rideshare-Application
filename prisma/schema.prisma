generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Carriers {
  ATT
  TMobile
  Verizon
  Sprint
  BoostMobile
  Cricket
  USCellular
}

model User {
  id                String                  @id @default(uuid())
  firstName         String            
  lastName          String
  phoneCarrier      Carriers
  phoneNumber       String                  @unique
  email             String                  @unique
  password          String
  authCode          String?                 
  isAdmin           Boolean                 @default(false)
  squadrons         Squadron[]            
  vehicles          Vehicle[]           
  passengers        Passenger[]           
  requests          Request[]           
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}

model Passenger {
  id                String                  @id @default(uuid())
  userId            String?             
  user              User?                   @relation(fields: [userId], references: [id])
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}             

model Driver {              
  id                String                  @id @default(uuid())
  email             String                  @unique
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}             

model Vehicle {             
  id                String                  @id @default(uuid())
  userId            String?             
  user              User?                   @relation(fields: [userId], references: [id])
  year              String              
  make              String              
  model             String              
  color             String              
  plate             String                  @unique
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}                      

model Dropoff {             
  id                String                  @id @default(uuid())
  dropoffLocation   String              
  requests          Request[]               @relation("DropoffRequests")
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}               

model Pickup {                
  id                String                  @id @default(uuid())
  pickupLocation    String              
  requests          Request[]               @relation("PickupRequests")
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}

model Request {
  id                String                  @id @default(uuid())
  userId            String?             
  user              User?                   @relation(fields: [userId], references: [id])
  pickupId          String?             
  pickup            Pickup?                 @relation("PickupRequests", fields: [pickupId], references: [id])
  dropoffId         String?             
  dropoff           Dropoff?                @relation("DropoffRequests", fields: [dropoffId], references: [id])
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}             

model Squadron {              
  id                String                  @id @default(uuid())
  userId            String?             
  user              User?                   @relation(fields: [userId], references: [id])
  squadronName      String
  baseId            String?
  base              Base?                   @relation(fields: [baseId], references: [id])
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}

model Base {
  id                String                  @id @default(uuid())             
  baseName          String
  baseState         String
  squadrons         Squadron[]
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
}
